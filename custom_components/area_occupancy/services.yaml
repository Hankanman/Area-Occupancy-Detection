update_area_prior:
  name: Update Area Prior
  description: "Update the area's baseline occupancy prior from historical data."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to update area prior for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

update_likelihoods:
  name: Update Sensor Likelihoods
  description: "Update the learned conditional probabilities for all configured sensors."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to update sensor likelihoods for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

reset_entities:
  name: Reset Entities
  description: "Reset all entity probabilities and learned data to start fresh."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to reset."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

get_area_status:
  name: Get Area Status
  description: "Get current area occupancy status, confidence level, and entity summary."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to get status for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

get_entity_metrics:
  name: Get Entity Metrics
  description: "Get comprehensive metrics about all entities for diagnostics and monitoring."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to get metrics for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

get_problematic_entities:
  name: Get Problematic Entities
  description: "Get entities that may need attention (unavailable, stale updates, stuck decay, etc.)."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to check for problems."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

get_entity_details:
  name: Get Entity Details
  description: "Get detailed information about specific entities including probabilities, decay status, and configuration."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance."
      required: true
      selector:
        config_entry:
          integration: area_occupancy
    entity_ids:
      name: Entity IDs
      description: "List of entity IDs to get details for (leave empty for all entities)."
      required: false
      selector:
        entity:
          multiple: true

force_entity_update:
  name: Force Entity Update
  description: "Force immediate probability recalculation for specific entities."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance."
      required: true
      selector:
        config_entry:
          integration: area_occupancy
    entity_ids:
      name: Entity IDs
      description: "List of entity IDs to force update (leave empty for all entities)."
      required: false
      selector:
        entity:
          multiple: true

get_entity_type_learned_data:
  name: Get Entity Type Learned Data
  description: "Get the current learned prior, prob_true, and prob_false for each entity type. Useful for diagnostics and monitoring the learning process."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to get learned entity type data for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

debug_import_intervals:
  name: Debug Import State Intervals
  description: "Manually trigger state intervals import from recorder with detailed debug logging. Use this to diagnose why state intervals aren't being populated."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to debug import for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy
    days:
      name: Days to Import
      description: "Number of days of historical data to import from recorder."
      required: false
      default: 10
      selector:
        number:
          min: 1
          max: 30
          step: 1

debug_database_state:
  name: Debug Database State
  description: "Check current simplified database state including intervals count, sample data, database statistics, and schema information. The database has been optimized with fewer tables and indexes for better performance."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to check database state for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

update_time_based_priors:
  name: Update Time Based Priors
  description: "Update the time-based priors for the area occupancy detection (runs in background)."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to update time-based priors for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy

get_time_based_priors:
  name: Get Time Based Priors
  description: "Get current time-based priors in a human-readable format."
  fields:
    entry_id:
      name: Entry ID
      description: "Select the Area Occupancy instance to get time-based priors for."
      required: true
      selector:
        config_entry:
          integration: area_occupancy
