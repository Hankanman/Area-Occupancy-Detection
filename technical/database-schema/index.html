<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation for the Home Assistant Area Occupancy Detection integration"><meta name=author content=Hankanman><link href=https://hankanman.github.io/Area-Occupancy-Detection/technical/database-schema/ rel=canonical><link href=../likelihood-calculation/ rel=prev><link href=../prerelease/ rel=next><link rel=icon href=https://brands.home-assistant.io/area_occupancy/dark_icon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.2"><title>Database Schema - Area Occupancy Detection</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=cyan> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#database-schema-documentation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Area Occupancy Detection" class="md-header__button md-logo" aria-label="Area Occupancy Detection" data-md-component=logo> <img src=https://brands.home-assistant.io/area_occupancy/dark_icon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Area Occupancy Detection </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Database Schema </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=black data-md-color-accent=cyan aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=black data-md-color-accent=cyan aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Hankanman/Area-Occupancy-Detection title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Hankanman/Area-Occupancy-Detection </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/installation/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../features/purpose/ class=md-tabs__link> Features </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../deep-dive/ class=md-tabs__link> Technical </a> </li> <li class=md-tabs__item> <a href=../../simulator/ class=md-tabs__link> Simulator </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Area Occupancy Detection" class="md-nav__button md-logo" aria-label="Area Occupancy Detection" data-md-component=logo> <img src=https://brands.home-assistant.io/area_occupancy/dark_icon.png alt=logo> </a> Area Occupancy Detection </label> <div class=md-nav__source> <a href=https://github.com/Hankanman/Area-Occupancy-Detection title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Hankanman/Area-Occupancy-Detection </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/why/ class=md-nav__link> <span class=md-ellipsis> Why AOD </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/basic-usage/ class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../features/purpose/ class=md-nav__link> <span class=md-ellipsis> Purpose </span> </a> </li> <li class=md-nav__item> <a href=../../features/sensors/ class=md-nav__link> <span class=md-ellipsis> Sensors </span> </a> </li> <li class=md-nav__item> <a href=../../features/calculation/ class=md-nav__link> <span class=md-ellipsis> Bayesian Calculation </span> </a> </li> <li class=md-nav__item> <a href=../../features/prior-learning/ class=md-nav__link> <span class=md-ellipsis> Prior Learning </span> </a> </li> <li class=md-nav__item> <a href=../../features/likelihood/ class=md-nav__link> <span class=md-ellipsis> Sensor Likelihoods </span> </a> </li> <li class=md-nav__item> <a href=../../features/sensor-correlation/ class=md-nav__link> <span class=md-ellipsis> Sensor Correlation </span> </a> </li> <li class=md-nav__item> <a href=../../features/wasp-in-box/ class=md-nav__link> <span class=md-ellipsis> Wasp in Box </span> </a> </li> <li class=md-nav__item> <a href=../../features/sleep-presence/ class=md-nav__link> <span class=md-ellipsis> Sleep Presence </span> </a> </li> <li class=md-nav__item> <a href=../../features/activity-detection/ class=md-nav__link> <span class=md-ellipsis> Activity Detection </span> </a> </li> <li class=md-nav__item> <a href=../../features/decay/ class=md-nav__link> <span class=md-ellipsis> Decay </span> </a> </li> <li class=md-nav__item> <a href=../../features/entities/ class=md-nav__link> <span class=md-ellipsis> Entities </span> </a> </li> <li class=md-nav__item> <a href=../../features/services/ class=md-nav__link> <span class=md-ellipsis> Services </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Technical </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Technical </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../deep-dive/ class=md-nav__link> <span class=md-ellipsis> Deep Dive </span> </a> </li> <li class=md-nav__item> <a href=../analysis-chain/ class=md-nav__link> <span class=md-ellipsis> Analysis Chain </span> </a> </li> <li class=md-nav__item> <a href=../bayesian-calculation/ class=md-nav__link> <span class=md-ellipsis> Bayesian Calculation </span> </a> </li> <li class=md-nav__item> <a href=../calculation-flow/ class=md-nav__link> <span class=md-ellipsis> Calculation Flow </span> </a> </li> <li class=md-nav__item> <a href=../data-flow/ class=md-nav__link> <span class=md-ellipsis> Data Flow </span> </a> </li> <li class=md-nav__item> <a href=../global-prior-flow/ class=md-nav__link> <span class=md-ellipsis> Global Prior Flow </span> </a> </li> <li class=md-nav__item> <a href=../time-prior-flow/ class=md-nav__link> <span class=md-ellipsis> Time Prior Flow </span> </a> </li> <li class=md-nav__item> <a href=../entity-evidence/ class=md-nav__link> <span class=md-ellipsis> Entity Evidence </span> </a> </li> <li class=md-nav__item> <a href=../likelihood-calculation/ class=md-nav__link> <span class=md-ellipsis> Likelihood Calculation </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Database Schema </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Database Schema </span> </a> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#architecture-principles class=md-nav__link> <span class=md-ellipsis> Architecture Principles </span> </a> </li> <li class=md-nav__item> <a href=#core-tables class=md-nav__link> <span class=md-ellipsis> Core Tables </span> </a> <nav class=md-nav aria-label="Core Tables"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#areas class=md-nav__link> <span class=md-ellipsis> areas </span> </a> </li> <li class=md-nav__item> <a href=#entities class=md-nav__link> <span class=md-ellipsis> entities </span> </a> </li> <li class=md-nav__item> <a href=#intervals class=md-nav__link> <span class=md-ellipsis> intervals </span> </a> </li> <li class=md-nav__item> <a href=#priors class=md-nav__link> <span class=md-ellipsis> priors </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#new-tables-for-advanced-features class=md-nav__link> <span class=md-ellipsis> New Tables for Advanced Features </span> </a> <nav class=md-nav aria-label="New Tables for Advanced Features"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#interval_aggregates class=md-nav__link> <span class=md-ellipsis> interval_aggregates </span> </a> </li> <li class=md-nav__item> <a href=#occupied_intervals_cache class=md-nav__link> <span class=md-ellipsis> occupied_intervals_cache </span> </a> </li> <li class=md-nav__item> <a href=#global_priors class=md-nav__link> <span class=md-ellipsis> global_priors </span> </a> </li> <li class=md-nav__item> <a href=#numeric_samples class=md-nav__link> <span class=md-ellipsis> numeric_samples </span> </a> </li> <li class=md-nav__item> <a href=#numeric_aggregates class=md-nav__link> <span class=md-ellipsis> numeric_aggregates </span> </a> </li> <li class=md-nav__item> <a href=#correlations class=md-nav__link> <span class=md-ellipsis> correlations </span> </a> </li> <li class=md-nav__item> <a href=#entity_statistics class=md-nav__link> <span class=md-ellipsis> entity_statistics </span> </a> </li> <li class=md-nav__item> <a href=#area_relationships class=md-nav__link> <span class=md-ellipsis> area_relationships </span> </a> </li> <li class=md-nav__item> <a href=#cross_area_stats class=md-nav__link> <span class=md-ellipsis> cross_area_stats </span> </a> </li> <li class=md-nav__item> <a href=#metadata class=md-nav__link> <span class=md-ellipsis> metadata </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#data-flow class=md-nav__link> <span class=md-ellipsis> Data Flow </span> </a> <nav class=md-nav aria-label="Data Flow"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#interval-processing class=md-nav__link> <span class=md-ellipsis> Interval Processing </span> </a> </li> <li class=md-nav__item> <a href=#prior-calculation class=md-nav__link> <span class=md-ellipsis> Prior Calculation </span> </a> </li> <li class=md-nav__item> <a href=#correlation-analysis class=md-nav__link> <span class=md-ellipsis> Correlation Analysis </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#retention-policies class=md-nav__link> <span class=md-ellipsis> Retention Policies </span> </a> </li> <li class=md-nav__item> <a href=#indexes-and-performance class=md-nav__link> <span class=md-ellipsis> Indexes and Performance </span> </a> </li> <li class=md-nav__item> <a href=#migration-strategy class=md-nav__link> <span class=md-ellipsis> Migration Strategy </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../prerelease/ class=md-nav__link> <span class=md-ellipsis> Pre-Releases </span> </a> </li> <li class=md-nav__item> <a href=../debug/ class=md-nav__link> <span class=md-ellipsis> Debugging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../simulator/ class=md-nav__link> <span class=md-ellipsis> Simulator </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Hankanman/Area-Occupancy-Detection/edit/main/docs/docs/technical/database-schema.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/Hankanman/Area-Occupancy-Detection/raw/main/docs/docs/technical/database-schema.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1 id=database-schema-documentation>Database Schema Documentation<a class=headerlink href=#database-schema-documentation title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>The Area Occupancy Detection integration uses a SQLite database to store sensor data, occupancy intervals, priors, and analytical data. The database is designed to support a single integration instance with multiple areas, enabling efficient cross-area analysis and long-term trend analysis.</p> <p><strong>Database Version:</strong> 5 <strong>Database File:</strong> <code>area_occupancy.db</code> (stored in <code>.storage/</code> directory)</p> <h2 id=architecture-principles>Architecture Principles<a class=headerlink href=#architecture-principles title="Permanent link">&para;</a></h2> <ol> <li><strong>Single Integration, Multiple Areas</strong>: All areas share the same <code>entry_id</code>, but each area has a unique <code>area_name</code> as its primary identifier.</li> <li><strong>Tiered Aggregation</strong>: Raw data is kept for a short period, then aggregated into daily, weekly, and monthly summaries to prevent database bloat.</li> <li><strong>Long-term Retention</strong>: Aggregated data is retained for years to enable seasonal trend analysis.</li> <li><strong>Cross-Area Support</strong>: Relationships between areas and shared sensors are tracked for advanced probability calculations.</li> </ol> <h2 id=core-tables>Core Tables<a class=headerlink href=#core-tables title="Permanent link">&para;</a></h2> <h3 id=areas><code>areas</code><a class=headerlink href=#areas title="Permanent link">&para;</a></h3> <p>Stores area configuration and metadata.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID (same for all areas)</td> </tr> <tr> <td><code>area_name</code></td> <td>String (PK)</td> <td>Unique area identifier</td> </tr> <tr> <td><code>area_id</code></td> <td>String</td> <td>Home Assistant area ID</td> </tr> <tr> <td><code>purpose</code></td> <td>String</td> <td>Area purpose (e.g., "social", "work", "sleep")</td> </tr> <tr> <td><code>threshold</code></td> <td>Float</td> <td>Occupancy probability threshold (0.0-1.0)</td> </tr> <tr> <td><code>adjacent_areas</code></td> <td>JSON</td> <td>Array of adjacent area names</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> <tr> <td><code>updated_at</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Primary key on <code>area_name</code></li> <li>Index on <code>entry_id</code></li> </ul> <p><strong>Relationships:</strong></p> <ul> <li>One-to-many with <code>entities</code></li> <li>One-to-many with <code>priors</code></li> </ul> <h3 id=entities><code>entities</code><a class=headerlink href=#entities title="Permanent link">&para;</a></h3> <p>Stores entity (sensor) configuration and Bayesian parameters.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String (PK, FK)</td> <td>Area this entity belongs to</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (PK)</td> <td>Home Assistant entity ID</td> </tr> <tr> <td><code>entity_type</code></td> <td>String</td> <td>Type (motion, media, appliance, etc.)</td> </tr> <tr> <td><code>weight</code></td> <td>Float</td> <td>Bayesian weight (0.0-1.0)</td> </tr> <tr> <td><code>prob_given_true</code></td> <td>Float</td> <td>P(entity active | area occupied)</td> </tr> <tr> <td><code>prob_given_false</code></td> <td>Float</td> <td>P(entity active | area unoccupied)</td> </tr> <tr> <td><code>is_shared</code></td> <td>Boolean</td> <td>Whether entity is shared across areas</td> </tr> <tr> <td><code>shared_with_areas</code></td> <td>JSON</td> <td>Array of area names this entity is shared with</td> </tr> <tr> <td><code>last_updated</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> <tr> <td><code>is_decaying</code></td> <td>Boolean</td> <td>Whether probability is currently decaying</td> </tr> <tr> <td><code>decay_start</code></td> <td>DateTime</td> <td>When decay started</td> </tr> <tr> <td><code>evidence</code></td> <td>Boolean</td> <td>Current evidence state</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Composite primary key on <code>(area_name, entity_id)</code></li> <li>Indexes on <code>entry_id</code>, <code>area_name</code>, <code>entity_type</code>, <code>is_shared</code></li> <li>Composite index on <code>(entry_id, area_name, entity_type)</code></li> </ul> <p><strong>Relationships:</strong></p> <ul> <li>Many-to-one with <code>areas</code></li> <li>One-to-many with <code>intervals</code></li> </ul> <h3 id=intervals><code>intervals</code><a class=headerlink href=#intervals title="Permanent link">&para;</a></h3> <p>Stores state change intervals for all sensors.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area this interval belongs to</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>state</code></td> <td>String</td> <td>Sensor state (e.g., "on", "off")</td> </tr> <tr> <td><code>start_time</code></td> <td>DateTime</td> <td>Interval start time</td> </tr> <tr> <td><code>end_time</code></td> <td>DateTime</td> <td>Interval end time</td> </tr> <tr> <td><code>duration_seconds</code></td> <td>Float</td> <td>Interval duration</td> </tr> <tr> <td><code>aggregation_level</code></td> <td>String</td> <td>Aggregation level: "raw", "daily", "weekly", "monthly"</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Primary key on <code>id</code></li> <li>Unique constraint on <code>(entity_id, start_time, end_time, aggregation_level)</code></li> <li>Indexes on <code>entry_id</code>, <code>area_name</code>, <code>entity_id</code>, <code>start_time</code>, <code>end_time</code>, <code>aggregation_level</code></li> <li>Composite indexes for common query patterns</li> </ul> <p><strong>Relationships:</strong></p> <ul> <li>Many-to-one with <code>entities</code></li> </ul> <p><strong>Retention Policy:</strong></p> <ul> <li>Raw intervals: 60 days</li> <li>Daily aggregates: 90 days</li> <li>Weekly aggregates: 365 days</li> <li>Monthly aggregates: 5 years</li> </ul> <h3 id=priors><code>priors</code><a class=headerlink href=#priors title="Permanent link">&para;</a></h3> <p>Stores time-slot priors (day of week × time slot). These are calculated from historical motion sensor data during the analysis cycle and provide time-of-day and day-of-week specific occupancy probabilities.</p> <p><strong>Purpose</strong>: Provides time-of-day and day-of-week specific occupancy probabilities. Each area has 168 time slots (7 days × 24 hours), allowing the system to learn patterns like "living room is usually occupied on weekdays at 7 PM" or "bedroom is rarely occupied on weekdays at 2 PM".</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID (same for all priors in the integration)</td> </tr> <tr> <td><code>area_name</code></td> <td>String (PK, FK)</td> <td>Area name (foreign key to <code>areas.area_name</code>)</td> </tr> <tr> <td><code>day_of_week</code></td> <td>Integer (PK)</td> <td>Day of week (0=Monday, 1=Tuesday, ..., 6=Sunday)</td> </tr> <tr> <td><code>time_slot</code></td> <td>Integer (PK)</td> <td>Time slot index (0=00:00-01:00, 1=01:00-02:00, ..., 23=23:00-24:00)</td> </tr> <tr> <td><code>prior_value</code></td> <td>Float</td> <td>Prior probability for this slot (0.0-1.0), clamped to [0.1, 0.9] at runtime</td> </tr> <tr> <td><code>data_points</code></td> <td>Integer</td> <td>Number of data points (weeks) used in calculation</td> </tr> <tr> <td><code>confidence</code></td> <td>Float</td> <td>Confidence in the calculation (0.0-1.0, nullable)</td> </tr> <tr> <td><code>last_calculation_date</code></td> <td>DateTime</td> <td>When prior was last calculated (nullable)</td> </tr> <tr> <td><code>sample_period_start</code></td> <td>DateTime</td> <td>Start of data period used for calculation (nullable)</td> </tr> <tr> <td><code>sample_period_end</code></td> <td>DateTime</td> <td>End of data period used for calculation (nullable)</td> </tr> <tr> <td><code>calculation_method</code></td> <td>String</td> <td>Method used (e.g., "interval_analysis", nullable)</td> </tr> <tr> <td><code>last_updated</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Primary Key</strong>: Composite of <code>(area_name, day_of_week, time_slot)</code></p> <ul> <li>Ensures one prior value per area per time slot</li> <li>Allows efficient lookup by area and time slot</li> </ul> <p><strong>Indexes:</strong></p> <ul> <li><code>idx_priors_entry</code> on <code>entry_id</code>: Fast filtering by integration entry</li> <li><code>idx_priors_area</code> on <code>area_name</code>: Fast filtering by area</li> <li><code>idx_priors_entry_area</code> on <code>(entry_id, area_name)</code>: Composite index for area-based queries</li> <li><code>idx_priors_day_slot</code> on <code>(day_of_week, time_slot)</code>: Fast lookup by time slot pattern</li> <li><code>idx_priors_last_updated</code> on <code>last_updated</code>: For tracking when priors were last recalculated</li> </ul> <p><strong>Relationships:</strong></p> <ul> <li>Many-to-one with <code>areas</code> table via <code>area_name</code> foreign key</li> </ul> <p><strong>Data Model</strong>:</p> <ul> <li>Each area has 168 records (7 days × 24 hours)</li> <li>Records are created/updated during analysis cycles</li> <li>Missing records default to 0.5 (neutral prior) at runtime</li> </ul> <p><strong>Retrieval</strong>:</p> <ul> <li>Queried via <code>queries.py:get_time_prior()</code> function</li> <li>Filtered by <code>entry_id</code>, <code>area_name</code>, <code>day_of_week</code>, <code>time_slot</code></li> <li>Returns <code>prior_value</code> or default (0.5) if not found</li> <li>Values are clamped to [0.1, 0.9] range at retrieval time</li> </ul> <p><strong>Current Status</strong>:</p> <ul> <li>Schema exists and is fully defined</li> <li>Retrieval mechanism is implemented</li> <li>Calculation and storage logic is <strong>fully implemented</strong></li> <li>Time priors are calculated during the analysis cycle and stored automatically</li> <li>See <a href=../time-prior-flow/ >Time Prior Flow</a> for complete implementation details</li> </ul> <h2 id=new-tables-for-advanced-features>New Tables for Advanced Features<a class=headerlink href=#new-tables-for-advanced-features title="Permanent link">&para;</a></h2> <h3 id=interval_aggregates><code>interval_aggregates</code><a class=headerlink href=#interval_aggregates title="Permanent link">&para;</a></h3> <p>Stores aggregated interval statistics for efficient querying.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>aggregation_period</code></td> <td>String</td> <td>Period: "daily", "weekly", "monthly", "yearly"</td> </tr> <tr> <td><code>period_start</code></td> <td>DateTime</td> <td>Period start time</td> </tr> <tr> <td><code>period_end</code></td> <td>DateTime</td> <td>Period end time</td> </tr> <tr> <td><code>state</code></td> <td>String</td> <td>Sensor state</td> </tr> <tr> <td><code>interval_count</code></td> <td>Integer</td> <td>Number of intervals in period</td> </tr> <tr> <td><code>total_duration_seconds</code></td> <td>Float</td> <td>Total duration of all intervals</td> </tr> <tr> <td><code>min_duration_seconds</code></td> <td>Float</td> <td>Minimum interval duration</td> </tr> <tr> <td><code>max_duration_seconds</code></td> <td>Float</td> <td>Maximum interval duration</td> </tr> <tr> <td><code>avg_duration_seconds</code></td> <td>Float</td> <td>Average interval duration</td> </tr> <tr> <td><code>first_occurrence</code></td> <td>DateTime</td> <td>First interval start in period</td> </tr> <tr> <td><code>last_occurrence</code></td> <td>DateTime</td> <td>Last interval end in period</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(entity_id, aggregation_period, period_start, state)</code></li> <li>Composite indexes for area-based and entity-based queries</li> </ul> <p><strong>Purpose:</strong> Enables fast queries for prior calculations and trend analysis without scanning raw intervals.</p> <h3 id=occupied_intervals_cache><code>occupied_intervals_cache</code><a class=headerlink href=#occupied_intervals_cache title="Permanent link">&para;</a></h3> <p>Stores precomputed occupied intervals for fast prior calculations.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>start_time</code></td> <td>DateTime</td> <td>Interval start time</td> </tr> <tr> <td><code>end_time</code></td> <td>DateTime</td> <td>Interval end time</td> </tr> <tr> <td><code>duration_seconds</code></td> <td>Float</td> <td>Interval duration</td> </tr> <tr> <td><code>calculation_date</code></td> <td>DateTime</td> <td>When interval was calculated</td> </tr> <tr> <td><code>data_source</code></td> <td>String</td> <td>Source: "motion_sensors", "merged"</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(area_name, start_time, end_time)</code></li> <li>Composite indexes for time-range queries</li> </ul> <p><strong>Purpose:</strong> Precomputed occupied intervals eliminate the need to recalculate from raw sensor data for each prior calculation.</p> <h3 id=global_priors><code>global_priors</code><a class=headerlink href=#global_priors title="Permanent link">&para;</a></h3> <p>Stores global prior values with calculation metadata and history. <strong>This is the only source of truth for global priors</strong> - the <code>areas</code> table no longer contains an <code>area_prior</code> field.</p> <p><strong>Purpose:</strong> Stores the global prior for each area with full history and metadata. The global prior represents the overall occupancy probability for an area, calculated from historical motion sensor data. It serves as the baseline for Bayesian probability calculations.</p> <p><strong>Calculation Method:</strong> The global prior is calculated as the ratio of total occupied time to total period duration:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>global_prior</span> <span class=o>=</span> <span class=n>total_occupied_seconds</span> <span class=o>/</span> <span class=n>total_period_seconds</span>
</span></code></pre></div> <p>The period is determined from actual data availability (first interval start to last interval end or current time), not a fixed lookback window. Values are clamped to the range <code>[0.01, 0.99]</code> to prevent extreme values.</p> <p><strong>Relationship to Time Priors:</strong> The global prior is combined with time priors (stored in <code>priors</code> table) to create a more accurate baseline probability. See <a href=../global-prior-flow/ >Global Prior Flow</a> for complete details.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String (Unique)</td> <td>Area name</td> </tr> <tr> <td><code>prior_value</code></td> <td>Float</td> <td>Global prior probability (0.01-0.99)</td> </tr> <tr> <td><code>calculation_date</code></td> <td>DateTime</td> <td>When prior was calculated</td> </tr> <tr> <td><code>data_period_start</code></td> <td>DateTime</td> <td>Start of data period used</td> </tr> <tr> <td><code>data_period_end</code></td> <td>DateTime</td> <td>End of data period used</td> </tr> <tr> <td><code>total_occupied_seconds</code></td> <td>Float</td> <td>Total occupied time in period</td> </tr> <tr> <td><code>total_period_seconds</code></td> <td>Float</td> <td>Total period duration</td> </tr> <tr> <td><code>interval_count</code></td> <td>Integer</td> <td>Number of intervals used</td> </tr> <tr> <td><code>confidence</code></td> <td>Float</td> <td>Confidence in calculation (0.0-1.0)</td> </tr> <tr> <td><code>calculation_method</code></td> <td>String</td> <td>Method used (default: "interval_analysis")</td> </tr> <tr> <td><code>underlying_data_hash</code></td> <td>String</td> <td>Hash of underlying data (for validation)</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> <tr> <td><code>updated_at</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>area_name</code> (ensures one global prior per area)</li> <li>Index on <code>calculation_date</code> (for history tracking and pruning)</li> </ul> <p><strong>Retrieval:</strong></p> <ul> <li>Queried via <code>queries.py:get_global_prior()</code> function</li> <li>Filtered by <code>area_name</code></li> <li>Returns dictionary with prior metadata, or <code>None</code> if not found</li> <li>Loaded during <code>load_data()</code> operation on integration startup</li> </ul> <p><strong>Storage:</strong></p> <ul> <li>Saved via <code>operations.py:save_global_prior()</code> function</li> <li>Called after global prior calculation in <code>PriorAnalyzer.calculate_and_update_prior()</code></li> <li>Updates existing record or creates new one</li> <li>Prunes old history (keeps last 15 calculations per area)</li> </ul> <p><strong>Retention:</strong> Last 15 calculations per area are retained. Older calculations are automatically pruned when new ones are saved.</p> <p><strong>See Also:</strong></p> <ul> <li><a href=../global-prior-flow/ >Global Prior Flow</a> - Complete calculation and data flow documentation</li> <li><a href=../time-prior-flow/ >Time Prior Flow</a> - Time-of-day specific priors</li> </ul> <h3 id=numeric_samples><code>numeric_samples</code><a class=headerlink href=#numeric_samples title="Permanent link">&para;</a></h3> <p>Stores raw numeric sensor samples for correlation analysis.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>timestamp</code></td> <td>DateTime</td> <td>Sample timestamp</td> </tr> <tr> <td><code>value</code></td> <td>Float</td> <td>Numeric value</td> </tr> <tr> <td><code>unit_of_measurement</code></td> <td>String</td> <td>Unit (e.g., "°C", "%")</td> </tr> <tr> <td><code>state</code></td> <td>String</td> <td>Associated state (if any)</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(entity_id, timestamp)</code></li> <li>Composite indexes for time-range queries</li> </ul> <p><strong>Retention:</strong> 14 days of raw samples.</p> <p><strong>Purpose:</strong> Raw samples are used to calculate correlations with occupancy and then aggregated.</p> <h3 id=numeric_aggregates><code>numeric_aggregates</code><a class=headerlink href=#numeric_aggregates title="Permanent link">&para;</a></h3> <p>Stores aggregated numeric sensor data for trend analysis.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>aggregation_period</code></td> <td>String</td> <td>Period: "hourly", "daily", "weekly", "monthly", "yearly"</td> </tr> <tr> <td><code>period_start</code></td> <td>DateTime</td> <td>Period start time</td> </tr> <tr> <td><code>period_end</code></td> <td>DateTime</td> <td>Period end time</td> </tr> <tr> <td><code>min_value</code></td> <td>Float</td> <td>Minimum value in period</td> </tr> <tr> <td><code>max_value</code></td> <td>Float</td> <td>Maximum value in period</td> </tr> <tr> <td><code>avg_value</code></td> <td>Float</td> <td>Average value in period</td> </tr> <tr> <td><code>median_value</code></td> <td>Float</td> <td>Median value in period</td> </tr> <tr> <td><code>sample_count</code></td> <td>Integer</td> <td>Number of samples in period</td> </tr> <tr> <td><code>first_value</code></td> <td>Float</td> <td>First value in period</td> </tr> <tr> <td><code>last_value</code></td> <td>Float</td> <td>Last value in period</td> </tr> <tr> <td><code>std_deviation</code></td> <td>Float</td> <td>Standard deviation</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(entity_id, aggregation_period, period_start)</code></li> <li>Composite indexes for area-based and entity-based queries</li> </ul> <p><strong>Retention:</strong></p> <ul> <li>Hourly aggregates: 30 days</li> <li>Weekly aggregates: 3 years (for seasonal analysis)</li> </ul> <p><strong>Purpose:</strong> Enables trend analysis across seasons (e.g., temperature differences between winter and summer).</p> <h3 id=correlations><code>correlations</code><a class=headerlink href=#correlations title="Permanent link">&para;</a></h3> <p>Stores calculated correlations between numeric sensor values and occupancy, as well as binary likelihood analysis results for binary sensors.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>input_type</code></td> <td>String</td> <td>Input type identifier. <strong>Numeric types:</strong> "temperature", "humidity", "illuminance", "co2", "sound_pressure", "pressure" (atmospheric), "air_quality", "voc", "pm25", "pm10", "power", "environmental". <strong>Binary types:</strong> "motion", "media", "appliance", "door", "window". <strong>Other:</strong> "unknown". Binary types are flagged with <code>correlation_type="binary_likelihood"</code> and use interval-overlap analysis instead of Pearson correlation.</td> </tr> <tr> <td><code>correlation_coefficient</code></td> <td>Float</td> <td>Pearson correlation (-1.0 to 1.0). <code>None</code> for binary sensors</td> </tr> <tr> <td><code>correlation_type</code></td> <td>String</td> <td>Type: "strong_positive", "strong_negative", "none", or "binary_likelihood"</td> </tr> <tr> <td><code>analysis_period_start</code></td> <td>DateTime</td> <td>Start of analysis period</td> </tr> <tr> <td><code>analysis_period_end</code></td> <td>DateTime</td> <td>End of analysis period</td> </tr> <tr> <td><code>sample_count</code></td> <td>Integer</td> <td>Number of samples used</td> </tr> <tr> <td><code>confidence</code></td> <td>Float</td> <td>Confidence in correlation (0.0-1.0). <code>None</code> for binary sensors</td> </tr> <tr> <td><code>mean_value_when_occupied</code></td> <td>Float</td> <td>For numeric sensors: mean value when occupied. For binary sensors: <code>prob_given_true</code></td> </tr> <tr> <td><code>mean_value_when_unoccupied</code></td> <td>Float</td> <td>For numeric sensors: mean value when unoccupied. For binary sensors: <code>prob_given_false</code></td> </tr> <tr> <td><code>std_dev_when_occupied</code></td> <td>Float</td> <td>Standard deviation when occupied. <code>None</code> for binary sensors</td> </tr> <tr> <td><code>std_dev_when_unoccupied</code></td> <td>Float</td> <td>Standard deviation when unoccupied. <code>None</code> for binary sensors</td> </tr> <tr> <td><code>threshold_active</code></td> <td>Float</td> <td>Threshold for active state. <code>None</code> for binary sensors</td> </tr> <tr> <td><code>threshold_inactive</code></td> <td>Float</td> <td>Threshold for inactive state. <code>None</code> for binary sensors</td> </tr> <tr> <td><code>analysis_error</code></td> <td>String</td> <td>Reason why analysis failed (e.g., "no_correlation", "too_few_samples", "no_occupied_intervals") or <code>None</code> if successful. Applies to both numeric correlations and binary likelihoods</td> </tr> <tr> <td><code>calculation_date</code></td> <td>DateTime</td> <td>When correlation was calculated</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> <tr> <td><code>updated_at</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Binary Likelihood Calculation Methodology:</strong></p> <p>For binary sensors (identified by <code>correlation_type="binary_likelihood"</code>), the <code>mean_value_when_occupied</code> and <code>mean_value_when_unoccupied</code> columns store probability values calculated using an interval-overlap method. This method measures the proportion of time a sensor is active during occupied and unoccupied periods.</p> <p><strong>Calculation Method:</strong></p> <p>The binary likelihood calculation uses interval overlap to determine:</p> <ul> <li><code>mean_value_when_occupied</code>: Probability that the sensor is active given the area is occupied</li> <li><code>mean_value_when_unoccupied</code>: Probability that the sensor is active given the area is unoccupied</li> </ul> <p><strong>Formulas:</strong></p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>mean_value_when_occupied = time_active_during_occupied / total_occupied_time
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>mean_value_when_unoccupied = time_active_during_unoccupied / total_unoccupied_time
</span></code></pre></div> <p><strong>Interval-Overlap Algorithm:</strong></p> <ol> <li> <p>For each active interval of the binary sensor (where the sensor state matches one of its <code>active_states</code>):</p> </li> <li> <p>Calculate the overlap duration with all occupied intervals</p> </li> <li> <p>Calculate the overlap duration with unoccupied periods (remainder of the interval after occupied overlap)</p> </li> <li> <p>Accumulate durations:</p> </li> <li> <p><code>time_active_during_occupied</code>: Sum of all overlap durations between active sensor intervals and occupied intervals</p> </li> <li><code>time_active_during_unoccupied</code>: Sum of all overlap durations between active sensor intervals and unoccupied periods</li> <li><code>total_occupied_time</code>: Total duration of all occupied intervals in the analysis period</li> <li> <p><code>total_unoccupied_time</code>: Total duration of all unoccupied periods in the analysis period</p> </li> <li> <p>Calculate probabilities by dividing accumulated active durations by total occupied/unoccupied time</p> </li> <li> <p>Clamp probabilities to the range [0.05, 0.95] to avoid extreme "black hole" values that could skew Bayesian calculations</p> </li> </ol> <p><strong>Supported Binary Sensor Types:</strong></p> <p>Binary likelihood analysis is performed for sensors with binary states, including:</p> <ul> <li><strong>Motion sensors</strong> (<code>input_type="motion"</code>): Detects movement in the area</li> <li><strong>Door/window sensors</strong> (<code>input_type="door"</code>, <code>input_type="window"</code>): Detects door or window open/closed states</li> <li><strong>Occupancy sensors</strong> (<code>input_type="occupancy"</code>): Binary occupancy detection devices</li> <li><strong>Media devices</strong> (<code>input_type="media"</code>): Media players with active/inactive states (playing, paused, standby)</li> <li><strong>Appliances</strong> (<code>input_type="appliance"</code>): Binary appliance on/off states</li> <li>Other binary sensors with defined <code>active_states</code> (e.g., <code>["on"]</code>, <code>["playing"]</code>, <code>["open"]</code>)</li> </ul> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(area_name, entity_id, analysis_period_start)</code></li> <li>Composite indexes for querying by correlation type and confidence</li> </ul> <p><strong>Retention:</strong> Last 24 months (one per month). Correlations are pruned monthly, keeping one record per month for the last 24 months.</p> <p><strong>Purpose:</strong></p> <ul> <li><strong>Numeric Sensors</strong>: Identifies which numeric sensors (temperature, humidity, illuminance, CO2, sound pressure, atmospheric pressure, air quality, VOC, PM2.5, PM10, power, etc.) correlate with occupancy, enabling them to be used as occupancy indicators.</li> <li><strong>Binary Sensors</strong>: Stores duration-based probability analysis results (<code>prob_given_true</code> and <code>prob_given_false</code>) calculated from interval overlaps with occupied/unoccupied periods.</li> </ul> <p><strong>Note:</strong> Both numeric correlation results and binary likelihood results are stored in this table, distinguished by the <code>correlation_type</code> field. Binary sensors use <code>correlation_type="binary_likelihood"</code> and store their probabilities in the <code>mean_value_when_occupied</code> and <code>mean_value_when_unoccupied</code> fields.</p> <h3 id=entity_statistics><code>entity_statistics</code><a class=headerlink href=#entity_statistics title="Permanent link">&para;</a></h3> <p>Stores per-entity operational and Bayesian statistics.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Area name</td> </tr> <tr> <td><code>entity_id</code></td> <td>String (FK)</td> <td>Entity ID</td> </tr> <tr> <td><code>statistic_type</code></td> <td>String</td> <td>Type: "operational" or "bayesian"</td> </tr> <tr> <td><code>statistic_name</code></td> <td>String</td> <td>Name (e.g., "total_activations", "prob_given_true")</td> </tr> <tr> <td><code>statistic_value</code></td> <td>Float</td> <td>Statistic value</td> </tr> <tr> <td><code>period_start</code></td> <td>DateTime</td> <td>Period start time</td> </tr> <tr> <td><code>period_end</code></td> <td>DateTime</td> <td>Period end time</td> </tr> <tr> <td><code>updated_at</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(entity_id, statistic_type, statistic_name, period_start)</code></li> <li>Composite indexes for area-based and entity-based queries</li> </ul> <p><strong>Purpose:</strong> Tracks operational statistics (counts, durations, frequencies) and Bayesian parameters (probabilities, weights) over time.</p> <h3 id=area_relationships><code>area_relationships</code><a class=headerlink href=#area_relationships title="Permanent link">&para;</a></h3> <p>Defines and tracks relationships between areas.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>area_name</code></td> <td>String</td> <td>Source area name</td> </tr> <tr> <td><code>related_area_name</code></td> <td>String</td> <td>Related/adjacent area name</td> </tr> <tr> <td><code>relationship_type</code></td> <td>String</td> <td>Type: "adjacent", "shared_wall", "shared_entrance", etc.</td> </tr> <tr> <td><code>influence_weight</code></td> <td>Float</td> <td>Influence weight (0.0-1.0)</td> </tr> <tr> <td><code>distance</code></td> <td>Float</td> <td>Physical distance (if applicable)</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> <tr> <td><code>updated_at</code></td> <td>DateTime</td> <td>Last update timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(area_name, related_area_name)</code></li> <li>Indexes for bidirectional queries</li> </ul> <p><strong>Purpose:</strong> Tracks which areas are adjacent or related, enabling cross-area probability adjustments. The <code>influence_weight</code> determines how much one area's occupancy affects another's probability.</p> <h3 id=cross_area_stats><code>cross_area_stats</code><a class=headerlink href=#cross_area_stats title="Permanent link">&para;</a></h3> <p>Stores aggregated statistics that span multiple areas.</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>id</code></td> <td>Integer (PK)</td> <td>Auto-increment primary key</td> </tr> <tr> <td><code>entry_id</code></td> <td>String</td> <td>Integration entry ID</td> </tr> <tr> <td><code>statistic_type</code></td> <td>String</td> <td>Type (e.g., "combined_occupancy", "shared_sensor_active")</td> </tr> <tr> <td><code>statistic_name</code></td> <td>String</td> <td>Statistic name</td> </tr> <tr> <td><code>involved_areas</code></td> <td>JSON</td> <td>Array of area names involved</td> </tr> <tr> <td><code>aggregation_period</code></td> <td>String</td> <td>Period: "hourly", "daily", "weekly", "monthly"</td> </tr> <tr> <td><code>period_start</code></td> <td>DateTime</td> <td>Period start time</td> </tr> <tr> <td><code>period_end</code></td> <td>DateTime</td> <td>Period end time</td> </tr> <tr> <td><code>statistic_value</code></td> <td>Float</td> <td>Statistic value</td> </tr> <tr> <td><code>extra_metadata</code></td> <td>JSON</td> <td>Additional metadata</td> </tr> <tr> <td><code>created_at</code></td> <td>DateTime</td> <td>Creation timestamp</td> </tr> </tbody> </table> <p><strong>Indexes:</strong></p> <ul> <li>Unique constraint on <code>(statistic_type, statistic_name, aggregation_period, period_start)</code></li> <li>Composite indexes for type and period queries</li> </ul> <p><strong>Purpose:</strong> Enables analysis of patterns across multiple areas, such as combined occupancy or shared sensor activity.</p> <h3 id=metadata><code>metadata</code><a class=headerlink href=#metadata title="Permanent link">&para;</a></h3> <p>Stores database metadata (version, last prune time, etc.).</p> <table> <thead> <tr> <th>Column</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>key</code></td> <td>String (PK)</td> <td>Metadata key</td> </tr> <tr> <td><code>value</code></td> <td>String</td> <td>Metadata value</td> </tr> </tbody> </table> <p><strong>Common Keys:</strong></p> <ul> <li><code>db_version</code>: Database schema version</li> <li><code>last_prune_time</code>: Timestamp of last interval prune operation</li> </ul> <h2 id=data-flow>Data Flow<a class=headerlink href=#data-flow title="Permanent link">&para;</a></h2> <h3 id=interval-processing>Interval Processing<a class=headerlink href=#interval-processing title="Permanent link">&para;</a></h3> <ol> <li><strong>Raw Intervals</strong>: State changes from Home Assistant recorder are converted to intervals and stored in <code>intervals</code> table with <code>aggregation_level="raw"</code>.</li> <li><strong>Aggregation</strong>: Periodically, raw intervals are aggregated:</li> <li>Raw → Daily: After 60 days</li> <li>Daily → Weekly: After 90 days</li> <li>Weekly → Monthly: After 365 days</li> <li>Monthly aggregates are retained indefinitely</li> <li><strong>Occupied Intervals Cache</strong>: Raw intervals are processed to create precomputed occupied intervals stored in <code>occupied_intervals_cache</code>.</li> </ol> <h3 id=prior-calculation>Prior Calculation<a class=headerlink href=#prior-calculation title="Permanent link">&para;</a></h3> <ol> <li><strong>Time-Slot Priors</strong>: Calculated from <code>occupied_intervals_cache</code> and stored in <code>priors</code> table.</li> <li><strong>Global Priors</strong>: Calculated from total occupied time and stored in <code>global_priors</code> table with full metadata.</li> </ol> <h3 id=correlation-analysis>Correlation Analysis<a class=headerlink href=#correlation-analysis title="Permanent link">&para;</a></h3> <ol> <li><strong>Numeric Samples</strong>: Raw numeric sensor values are stored in <code>numeric_samples</code>.</li> <li><strong>Aggregation</strong>: Samples are aggregated into <code>numeric_aggregates</code> for trend analysis.</li> <li><strong>Correlation</strong>: Samples are correlated with occupancy intervals to calculate correlations stored in <code>correlations</code>.</li> </ol> <h2 id=retention-policies>Retention Policies<a class=headerlink href=#retention-policies title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Data Type</th> <th>Retention Period</th> <th>Aggregation</th> </tr> </thead> <tbody> <tr> <td>Raw intervals</td> <td>60 days</td> <td>None</td> </tr> <tr> <td>Raw numeric samples</td> <td>14 days</td> <td>None</td> </tr> <tr> <td>Daily interval aggregates</td> <td>90 days</td> <td>From raw</td> </tr> <tr> <td>Weekly interval aggregates</td> <td>365 days</td> <td>From daily</td> </tr> <tr> <td>Monthly interval aggregates</td> <td>5 years</td> <td>From weekly</td> </tr> <tr> <td>Hourly numeric aggregates</td> <td>30 days</td> <td>From raw samples</td> </tr> <tr> <td>Weekly numeric aggregates</td> <td>3 years</td> <td>From hourly</td> </tr> <tr> <td>Global priors</td> <td>Last 15 calculations</td> <td>N/A</td> </tr> <tr> <td>Numeric correlations</td> <td>Last 24 months (one per month)</td> <td>N/A</td> </tr> </tbody> </table> <h2 id=indexes-and-performance>Indexes and Performance<a class=headerlink href=#indexes-and-performance title="Permanent link">&para;</a></h2> <p>The database uses extensive indexing to optimize common query patterns:</p> <ul> <li><strong>Time-range queries</strong>: Indexes on <code>start_time</code>, <code>end_time</code>, <code>timestamp</code></li> <li><strong>Area-based queries</strong>: Indexes on <code>area_name</code> in all relevant tables</li> <li><strong>Entity-based queries</strong>: Indexes on <code>entity_id</code> in all relevant tables</li> <li><strong>Composite indexes</strong>: Optimize multi-column queries (e.g., area + time range)</li> </ul> <h2 id=migration-strategy>Migration Strategy<a class=headerlink href=#migration-strategy title="Permanent link">&para;</a></h2> <p>When the database schema version changes:</p> <ol> <li>Database version is checked on startup</li> <li>If version mismatch detected, database is deleted and recreated with new schema</li> <li>All previous data is cleared (no migration scripts for major version changes)</li> </ol> <p>This approach is used for DB_VERSION 5+ due to the fundamental architectural change from multiple integrations to a single integration with multiple areas.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../likelihood-calculation/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Likelihood Calculation"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Likelihood Calculation </div> </div> </a> <a href=../prerelease/ class="md-footer__link md-footer__link--next" aria-label="Next: Pre-Releases"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Pre-Releases </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/Hankanman/Area-Occupancy-Detection target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.top", "navigation.footer", "search.highlight", "search.share", "search.suggest", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.action.edit", "content.action.view", "toc.follow", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../javascript/mathjax.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>